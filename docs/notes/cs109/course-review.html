<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Knowledge – course-review</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Knowledge</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notes.html">Stanford Notes</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#reference" id="toc-reference" class="nav-link active" data-scroll-target="#reference">Reference</a>
  <ul class="collapse">
  <li><a href="#random-variables" id="toc-random-variables" class="nav-link" data-scroll-target="#random-variables">6-10. Random variables</a></li>
  <li><a href="#bayes-and-conditional-probability-with-random-variables" id="toc-bayes-and-conditional-probability-with-random-variables" class="nav-link" data-scroll-target="#bayes-and-conditional-probability-with-random-variables">12-13. Bayes’ and conditional probability with random variables</a></li>
  <li><a href="#general-inference-bayesian-networks" id="toc-general-inference-bayesian-networks" class="nav-link" data-scroll-target="#general-inference-bayesian-networks">14-15. General inference (Bayesian networks)</a></li>
  <li><a href="#beta" id="toc-beta" class="nav-link" data-scroll-target="#beta">16. Beta</a></li>
  <li><a href="#bootstrapping" id="toc-bootstrapping" class="nav-link" data-scroll-target="#bootstrapping">19. Bootstrapping</a></li>
  <li><a href="#maximum-likelihood-estimation-mle" id="toc-maximum-likelihood-estimation-mle" class="nav-link" data-scroll-target="#maximum-likelihood-estimation-mle">Maximum likelihood estimation (MLE)</a></li>
  <li><a href="#adding-random-variables" id="toc-adding-random-variables" class="nav-link" data-scroll-target="#adding-random-variables">17. Adding random variables</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="reference" class="level1">
<h1>Reference</h1>
<section id="random-variables" class="level3">
<h3 class="anchored" data-anchor-id="random-variables">6-10. Random variables</h3>
<blockquote class="blockquote">
<h5 id="approximations" class="anchored">Approximations</h5>
<ul>
<li>Use the <strong>Poisson approximation</strong> when <span class="math inline">\(n\)</span> is large <span class="math inline">\((&gt;20)\)</span> and <span class="math inline">\(p\)</span> is small <span class="math inline">\((&lt;0.05)\)</span>. Use the <strong>Normal approximation</strong> when <span class="math inline">\(n\)</span> is large <span class="math inline">\((&gt;20)\)</span>, and <span class="math inline">\(p\)</span> is mid-ranged. Specifically, when variance is greater then 10 , in other words: <span class="math inline">\(n p(1-p)&gt;10\)</span>. If in doubt, go with normal.</li>
<li></li>
</ul>
</blockquote>
</section>
<section id="bayes-and-conditional-probability-with-random-variables" class="level3">
<h3 class="anchored" data-anchor-id="bayes-and-conditional-probability-with-random-variables">12-13. Bayes’ and conditional probability with random variables</h3>
<p><strong>Discrete/discrete conditional</strong>: <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are discrete RV’s. Conditional definition with discrete random variables. <span class="math display">\[
\mathrm{P}(X=x \mid Y=y)=\frac{P(X=x, Y=y)}{P(Y=y)}
\]</span></p>
<p><strong>Discrete/discrete Bayes’</strong>: Let <span class="math inline">\(M\)</span> and <span class="math inline">\(N\)</span> be discrete random variables. Then, by Bayes’ theorem: <span class="math display">\[P(M=m \mid N=n)=\frac{P(N=n \mid M=m) P(M=m)}{P(N=n)}.\]</span> Law of total probability way: <span class="math display">\[P(M=m \mid N=n)=\frac{P(N=n \mid M=m) P(M=m)}{P(N=n \mid M=m) P(M=m) + P(N=n \mid M=m^{C}) P(M=m^{C})}.\]</span></p>
<section id="bayes-formulas" class="level5">
<h5 class="anchored" data-anchor-id="bayes-formulas">Bayes’ formulas</h5>
<p><span class="math display">\[
\mathrm{M}, \mathrm{N} \text { are discrete. } \mathrm{X}, \mathrm{Y} \text { are continuous }
\]</span></p>
<p><span class="math display">\[
\begin{aligned}
p_{M \mid N}(m \mid n) &amp;=\frac{P_{N \mid M}(n \mid m) p_{M}(m)}{p_{N}(n)} \\
f_{X \mid N}(x \mid n) &amp;=\frac{P_{N \mid X}(n \mid x) f_{X}(x)}{P_{N}(n)} \\
p_{N \mid X}(n \mid x) &amp;=\frac{f_{X \mid N}(x \mid n) p_{N}(n)}{f_{X}(x)} \\
f_{X \mid Y}(x \mid y) &amp;=\frac{f_{Y \mid X}(y \mid x) f_{X}(x)}{f_{Y}(y)}
\end{aligned}
\]</span></p>
</section>
</section>
<section id="general-inference-bayesian-networks" class="level3">
<h3 class="anchored" data-anchor-id="general-inference-bayesian-networks">14-15. General inference (Bayesian networks)</h3>
<ul>
<li>We started out with joints for specifying various probabilities for multiple random variable systems. However, joint becomes too big so we to do inference (conditional probability RVs: updating your belief about an RV event given a different RV event), we construct causal Bayesian networks. To compute conditional probability from Bayesian network, use <strong>rejection sampling</strong>: <strong>Pseudcode:</strong></li>
<li><strong>Step 0</strong>: Have a fully specified Bayesian network layed out.</li>
<li><strong>Step 1</strong>: sample a ton!</li>
<li><strong>Step 2</strong>: collect subset of samples consistent with observation (thing you are conditioning)</li>
<li><strong>Step 3</strong>: loop through this subset and count number of times the thing you want the probability of is present in the sample.</li>
<li><strong>Step 4</strong>: Divide this count by the length of this sample subset (the subset whose elements are samples consistent with the observation).</li>
</ul>
</section>
<section id="beta" class="level3">
<h3 class="anchored" data-anchor-id="beta">16. Beta</h3>
<p><strong>Uniform prior</strong>:</p>
<p><img src="Pasted%20image%2020220317003309.png" class="img-fluid"></p>
<p><strong>Conjugate prior</strong>:</p>
<p><img src="Pasted%20image%2020220317002237.png" class="img-fluid"></p>
</section>
<section id="bootstrapping" class="level3">
<h3 class="anchored" data-anchor-id="bootstrapping">19. Bootstrapping</h3>
<blockquote class="blockquote">
<p>Summary: say we want to measure a statistic about the general population. We of course cannot survey the entire population so instead we take a sample of size <span class="math inline">\(n\)</span>. Then, bootstrapping allows us to estimate what the true distribution (i.e.&nbsp;if the whole population had indeed been sampled) is by resampling. Specifically, the algorithm goes like this: 1. take your initial sample from the population of size <span class="math inline">\(n\)</span>. 2. Create a loop of 10,000 or greater times. At each iteration, draw a sample, of size <span class="math inline">\(n\)</span> from the initial sample. 3. Calculate your statistic you want on this subset sample. Append it to a master list. 4. After the loop, calculate the statistic on this master list itself (note that the master list is literally a graph-able list of all the e.g.&nbsp;variances and from that distribution you want the e.g.&nbsp;variance). This is you answer.</p>
</blockquote>
<p>Pseudocode:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bootstrap(sample):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>   N <span class="op">=</span> number of elements <span class="kw">in</span> sample</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>   pmf <span class="op">=</span> estimate the underlying pmf <span class="im">from</span> the sample</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>   stats <span class="op">=</span> []</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>   repeat <span class="dv">10</span>,<span class="dv">000</span> times:</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>      resample <span class="op">=</span> draw N new samples <span class="im">from</span> the pmf</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>      stat <span class="op">=</span> calculate your stat on the resample</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>      stats.append(stat)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>   stats can now be used to estimate the distribution of the stat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="p-values" class="level4">
<h4 class="anchored" data-anchor-id="p-values">P-values</h4>
<p>We have two distributions of numbers. We want to know whether or not the two distributions are fundamentally different or the same: were the numbers for each distribution drawn from the same universal underlying distribution? - The <strong>null hypothesis</strong> is that they aren’t different: there is no difference between the two groups, so everyone is drawn from the same distribution. A <strong>p-value</strong> is simply the <em>probability</em> (i.e.&nbsp;# between <span class="math inline">\([0,1]\)</span>) that the null hypothesis is true. So…<br>
- If <span class="math inline">\(p\)</span> is closer to <span class="math inline">\(1\)</span>, then we think that the distributions are likely to be the same (i.e.&nbsp;drawn from the same underlying distribution).<br>
- If <span class="math inline">\(p\)</span> is closer to <span class="math inline">\(0\)</span>, then we think that the distributions are likely to be different (i.e.&nbsp;drawn from different underlying distributions).</p>
<p>We use bootstrapping here via repeated sampling.</p>
<p>First, take the two distributions and jot down the initial difference between the means (or whatever relevant statistic you are calculating). 1. Concatenate together the two sample lists to make one universal distribution, <span class="math inline">\(U\)</span>. 2. Iterate at least <span class="math inline">\(10,000\)</span> times and at each iteration, sample from <span class="math inline">\(U\)</span> (appropriate lengths) twice: one for group A and one for group B. 3. Say you want to calculate the difference in means (called effect size). Take abs(diff between means). Append this to a master list which gets all the effect sizes for the iterations. 4. Also, at each iteration, calculate whether the effect size between the current sample means is greater than the initial effect size. If so, add to a counter. 5. At the end, take the counter value and divide it by the total number of iterations. This is your p-value.</p>
<hr>
<p>We can calculate p-value using bootstrapping:</p>
<ul>
<li>Identify what sample statistics you’re calculating, e.g.&nbsp;abs difference of sample means.</li>
<li>State null hypothesis.</li>
<li>Calculate observed sample statistics (using observed sample).</li>
<li>Run a bootstrap experiment.</li>
<li>Resample the original sample to get a equally-sized new sample.</li>
<li>Calculate new sample statistic.</li>
<li>If new sample statistic is more extreme than observed statistic, count <span class="math inline">\(+=1\)</span>.</li>
<li>p-value: percentage of more extreme samples over all bootstrap samples <span class="math inline">\(\left(\frac{\text { count }}{\text { num trials }}\right)\)</span>.</li>
</ul>
<p>Alternative explanation:</p>
</section>
</section>
<section id="maximum-likelihood-estimation-mle" class="level3">
<h3 class="anchored" data-anchor-id="maximum-likelihood-estimation-mle">Maximum likelihood estimation (MLE)</h3>
<p><img src="attachments/Pasted%20image%2020220317025158.png" class="img-fluid"></p>
<section id="logarithm-rules" class="level4">
<h4 class="anchored" data-anchor-id="logarithm-rules">Logarithm rules</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="attachments/Pasted%20image%2020220317025602.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">|200</figcaption><p></p>
</figure>
</div>
<p>Recall we are working with <span class="math inline">\(log_e\)</span> (natural log) which is <span class="math inline">\(ln\)</span>. <img src="attachments/Pasted%20image%2020220317025548.png" class="img-fluid" alt="|200"></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="attachments/Pasted%20image%2020220317025728.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">|200</figcaption><p></p>
</figure>
</div>
<section id="derivative-rules" class="level5">
<h5 class="anchored" data-anchor-id="derivative-rules">Derivative rules:</h5>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="attachments/Pasted%20image%2020220317030027.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">|500</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="attachments/Pasted%20image%2020220317030120.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">|200</figcaption><p></p>
</figure>
</div>
<p><span class="math display">\[
\begin{aligned}
&amp;\frac{d}{d x} \ln (x)=\frac{1}{x} \\
&amp;\frac{d}{d x} \ln [f(x)]=\frac{1}{f(x)} f^{\prime}(x) \\
&amp;\frac{d}{d x} \log _{a}(x)=\frac{1}{x \ln a} \\
&amp;\frac{d}{d x} \log _{a}[f(x)]=\frac{1}{f(x) \ln a} f^{\prime}(x)
\end{aligned}
\]</span></p>
</section>
</section>
</section>
<section id="adding-random-variables" class="level3">
<h3 class="anchored" data-anchor-id="adding-random-variables">17. Adding random variables</h3>
<ul>
<li><strong>Example:</strong> here is an intuitive example. We have two groups of people
<ul>
<li>P1: 50 people, each independently infected with <span class="math inline">\(p=0.1\)</span></li>
<li>P2: 100 people, each independently infected with <span class="math inline">\(p=0.4\)</span></li>
<li>Question: Probability of more than 40 infections?
<ul>
<li>Solution: your first thought is probably to define two binomial random variables and just add them. Let <span class="math inline">\(P_1 \sim bin(50,0.1)\)</span> and let <span class="math inline">\(P_1 \sim bin(100,0.4)\)</span>. But we have a problem. We can’t add binomials with different probability parameters (see course reader equation definitions)! So what we do now? We <strong>approximate the binomials with normals</strong>!!!<br>
</li>
<li>The key point here is that you should try to rearrange your problem to get it in terms of something you know how to work with.</li>
<li>Though remember to perform continuinty correction when tranforming from the discrete to continious realm.</li>
</ul></li>
</ul></li>
<li><strong>Remark:</strong> Say we have some random variable, <span class="math inline">\(X\)</span>. What is <span class="math inline">\(2X\)</span>? Hold your horses. It is not like what we did above. In fact, this is an invalid expression. Can you picture why? Because <span class="math inline">\(X\)</span> is not independent from itself! So instead, we must use a <strong>linear transform</strong>.</li>
<li><strong>Remark:</strong> subtraction is just addition by linear transforming the second part of the expression with -1 first. So <span class="math inline">\(X-Y=X+(-1Y)=X+(-Y)\)</span>.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>