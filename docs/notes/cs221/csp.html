<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Knowledge – csp</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Knowledge</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notes.html">Stanford Notes</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../machine-learning.html">Machine Learning</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../concepts.html">Concepts</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#constraint-satisfaction-problems" id="toc-constraint-satisfaction-problems" class="nav-link active" data-scroll-target="#constraint-satisfaction-problems">Constraint satisfaction problems</a>
  <ul class="collapse">
  <li><a href="#i.-overview" id="toc-i.-overview" class="nav-link" data-scroll-target="#i.-overview">I. Overview</a>
  <ul class="collapse">
  <li><a href="#variable-based-models" id="toc-variable-based-models" class="nav-link" data-scroll-target="#variable-based-models">Variable-based models</a></li>
  </ul></li>
  <li><a href="#ii.-definitions" id="toc-ii.-definitions" class="nav-link" data-scroll-target="#ii.-definitions">II. Definitions</a></li>
  <li><a href="#iii.-examples" id="toc-iii.-examples" class="nav-link" data-scroll-target="#iii.-examples">III. Examples</a></li>
  <li><a href="#iv.-dynamic-ordering" id="toc-iv.-dynamic-ordering" class="nav-link" data-scroll-target="#iv.-dynamic-ordering">IV. Dynamic Ordering</a>
  <ul class="collapse">
  <li><a href="#backtracking-search" id="toc-backtracking-search" class="nav-link" data-scroll-target="#backtracking-search">Backtracking search</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="constraint-satisfaction-problems" class="level1">
<h1>Constraint satisfaction problems</h1>
<blockquote class="blockquote">
<p>This note covers the units in CS 221 for the CSP unit.</p>
</blockquote>
<section id="i.-overview" class="level2">
<h2 class="anchored" data-anchor-id="i.-overview">I. Overview</h2>
<blockquote class="blockquote">
<p>Search but incorporating problem structure into the model and focusing on modeling instead of inference.</p>
</blockquote>
<ul>
<li>Start of the variable-based models.</li>
<li>Heart is object called a <strong>factor graph</strong>.
<ul>
<li>Will formally introduce them next lecture, but here is the general idea:</li>
</ul></li>
</ul>
<div id="def-default" class="theorem definition">
<span class="theorem-title"><strong>Definition 1 </strong></span><strong>(factor graphs (high-level overview))</strong>: We are given a graphical model consisting of variables <span class="math inline">\(X_1,...,X_n\)</span> and factors (functions) <span class="math inline">\(f_1,...,f_m\)</span> where the factors defines how the variables relate to each other (in a graphical way):
<p align="center">
<img alt="picture 1" src="https://cdn.jsdelivr.net/gh/minimatest/vscode-images/images/1c1f4adf14a6be608537a8a6e00b7928dbb14b36f0b27079866946645e8992d6.png" width="300">
</p>
<p>A solution to a variable-based model problem is an assignment to the variables (discrete or continious).</p>
</div>
<p>Here is an example:</p>
<div id="exm-default" class="theorem example">
<p><span class="theorem-title"><strong>Example 1 </strong></span><strong>(Map coloring)</strong>: Given a map of Australia, color each of the provinces in red, green, or blue such that (the <em>constraint</em>) no two adjacent provinces have the same color.</p>
<p align="center">
<img alt="picture 2" src="https://cdn.jsdelivr.net/gh/minimatest/vscode-images/images/32f641bcd187d2334296a037f9a5ca7efa327540545ba73feca3964ab5b600a6.png" width="300">
</p>
</div>
<p>To motivate factor graphs and CSP models, think about how we can solve this as a search problem. We can do it like this:</p>
<p align="center">
<img alt="picture 3" src="https://cdn.jsdelivr.net/gh/minimatest/vscode-images/images/3ca33e985b3877691d8ae1fdf8a5363c77660f33d5a57cd03cc811c1f75bccb2.png" width="80%">
</p>
<p>where each leaf node defines if it satisfies the conditions and each branch explores a potential solution path.</p>
<div class="callout-note callout callout-style-simple">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Key realization</strong>: the search problem doesn’t encompass useful information about the problem structure. For example, in this case:</p>
<ul>
<li>Variable ordering doesn’t affect correctness, can optimize</li>
<li>Variables are interdependent in a local way, can decompose. That is, we can solve Tasmania in isolation cuz its in the ocean and then re-combine at the end to solve the entire problem. Decompose problem into subproblems.</li>
</ul>
<p>The key realization is that by incorporating the problem structure into our solution (which search fails to incorporate), we can <em>speed up</em> the algorithm solution.</p>
</div>
</div>
</div>
<section id="variable-based-models" class="level3">
<h3 class="anchored" data-anchor-id="variable-based-models">Variable-based models</h3>
<ul>
<li>Algorithms:
<ul>
<li>Constraint satisfaction problems</li>
<li>Markov networks</li>
<li>Bayesian networks</li>
</ul></li>
<li>Key uniting factor:
<ul>
<li>Idea of a <strong>variable</strong>.</li>
</ul></li>
<li>Variable-based models is just another term for probabilistic graphical models!</li>
<li>Theory is that variables are a higher-level (Python to assembly comparison) way to model a problems ❓.
<ul>
<li>Ok… this is what this means: we focus on modeling and devote the cumbersome work to the inference algorithms which allows us to focus more on modeling (unlike search). Makes more of a general framework to solve different types of problems unlike search.</li>
</ul></li>
</ul>
<p align="center">
<img alt="picture 4" src="https://cdn.jsdelivr.net/gh/minimatest/vscode-images/images/40ad2fb586b5444a3f648cbe537b932414218d301ae05a599720e72eaa343f0f.png" width="80%">
</p>
<p>So just to summarize, the idea behind state-based models is that we model the problem as a factor graph (modeling) and then assign values to the variables (inference).</p>
<p><strong>Example problems:</strong></p>
<ul>
<li>Vehicle routing: how to assign packages to trucks to deliver to customers.</li>
<li>Scheduling: when to schedule sports team to meet to minimize things like travel, availability of TV networks, etc.</li>
<li>School class scheduling</li>
</ul>
<p>The thing that is ubiqitious about this is that we aim to solve an isolated problem but with a set of constraints (hence, CSP). As you might imagine, CSP’s are therefore very useful.</p>
<p><strong>Roadmap</strong>:</p>
<p align="center">
<img alt="picture 5" src="https://cdn.jsdelivr.net/gh/minimatest/vscode-images/images/cc06b914f1d327a8f37c22f5171d2b6eb88ccfde7d54c9187508b1cdef86de3c.png" width="60%">
</p>
<ul>
<li>Definitions</li>
<li>Algorithms to solve CSP’s</li>
<li>Approximations to speed up the exponential cost</li>
</ul>
</section>
</section>
<section id="ii.-definitions" class="level2">
<h2 class="anchored" data-anchor-id="ii.-definitions">II. Definitions</h2>
<p>From R&amp;N:</p>
<p align="center">
<img alt="picture 6" src="https://cdn.jsdelivr.net/gh/minimatest/vscode-images/images/abad59d0a4b3ad83c86242d7ccf009ff3019a06d202b098185c3eab82722b9ef.png" width="90%">
</p>
<p>To-do: cover weights.</p>
<p>Note: weights make you think <em>globally</em> (due to products in calculations) while factors represent local dependencies!</p>
<p>Note: factors == constraints.</p>
<p>Definitions (from slides):</p>
<p align="center">
<img alt="picture 9" src="https://cdn.jsdelivr.net/gh/minimatest/vscode-images/images/39325f5f0060ad48edbab5b07b9ec6fba417c4227815abdbaa1d0815bf1c3394.png" width="50%">
</p>
<p align="center">
<img alt="picture 8" src="https://cdn.jsdelivr.net/gh/minimatest/vscode-images/images/6f512d11c74c3c39619c1aa4bb4b26850c79e85d476c0aaf3ac300d01cafdb47.png" width="35%">
</p>
<p align="center">
<img alt="picture 7" src="https://cdn.jsdelivr.net/gh/minimatest/vscode-images/images/5ba81fefb4e1162851a742e3b0624eae0d859b2b7a2839a6a116166c2de7bdda.png" width="60%">
</p>
</section>
<section id="iii.-examples" class="level2">
<h2 class="anchored" data-anchor-id="iii.-examples">III. Examples</h2>
<ul>
<li>LSAT logic puzzle</li>
<li>Event scheduling</li>
<li>Program verification</li>
</ul>
<div id="def-default" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2 </strong></span><strong>(indicator function)</strong>: (useful for defining constraints/factors).</p>
<p>Can think of it as a python function that returns a boolean if the specified condition is true.</p>
</div>
<blockquote class="blockquote">
<p>Basic idea is to formulate your problem in terms of variables (desired quantities to be assigned) and factors (your constraints for these variable values). A CSP will assign values to these variables that are supposed to satisfy the constraints. Moreover, define factors as indicator functions that check whether the specified condition (i.e., the constraint) is true.</p>
</blockquote>
</section>
<section id="iv.-dynamic-ordering" class="level2">
<h2 class="anchored" data-anchor-id="iv.-dynamic-ordering">IV. Dynamic Ordering</h2>
<ul>
<li>We covered modeling, now let’s get to inference (how to solve CSP’s!)</li>
<li>To understand how to solve CSP, must understand idea behind weights.</li>
</ul>
<p>Each assignment <span class="math inline">\(x=\left(x_1, \ldots, x_n\right)\)</span> has a weight: <span class="math display">\[
\operatorname{Weight}(x)=\prod_{j=1}^m f_j(x)
\]</span></p>
<p>(notice how it depends on the factors!) So essentially, what we are saying is that we set a weight for each factor/constraint and the outcome/result is what is being weighted. Then, we can mathematically define the objective:</p>
<p><span class="math display">\[
\arg \max _x \text { Weight }(x)
\]</span></p>
<p>that is, find the max <span class="math inline">\(x\)</span> for the assignments.</p>
<p>❓I guess the idea is that the solutions will have a bigger weight than non-solutions? What to do in tie? Where to draw line of solution and non-solution?</p>
<section id="backtracking-search" class="level3">
<h3 class="anchored" data-anchor-id="backtracking-search">Backtracking search</h3>
<ul>
<li>Blueprint for DO (dynamic ordering)</li>
<li>Cut-off when condition isn’t satisfied</li>
<li>Explore all paths</li>
<li>Take highest weighted path at end as solution if satisfies conditions</li>
</ul>
<p>We can probe this idea further to motivate DO.</p>
<ul>
<li>Idea: <strong>partial assignment weights</strong>
<ul>
<li>Recall that the weight of an assignment (solution!) is the product of all the factors.</li>
<li>We define the weight of a partial assignment to be the product of all the factors that we can evaluate, namely those whose scope includes only assigned variables.</li>
<li>For example, if only <span class="math inline">\(WA\)</span> and <span class="math inline">\(NT\)</span> are assigned, the weight is just value of the single factor between them.</li>
<li>When we assign a new variable a value, the weight of the new extended assignment is the old weight times all the factors that depend on the new variable and only previously assigned variables.</li>
</ul></li>
</ul>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>